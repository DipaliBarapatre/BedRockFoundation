<div class="row-fluid" ng-repeat="day in days">
  <div class="span12">
    <div class="widget">
      <div class="widget-title">
        <div class="icon"><i class="icon20 i-clock-2"></i></div> 
        <h4>{{ day.toString().split(" ")[0] }}, {{ day.toLocaleDateString() }}</h4>
      </div><!-- End .widget-title -->
    
      <div class="widget-content">


        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
            
              <th ng-repeat="crew in crews | orderObjectBy:'order'">{{crew.name}}</th>
            
            </tr>
          </thead>
          <tbody>
            <tr>
                <td ng-repeat="crew in crews | orderObjectBy:'order'">
                  <section class="notes">
                    <div ng-repeat="note in notes | crewFilter: crew.id | dayFilter:day.toJSON().split('T')[0]" style="padding: 5px 10px; background-color: #ffd; color: #111; border: 1px solid #cc9;">
                      <a href="#" class="btn btn-link iconly"><i class="icon16 i-quill-3"></i></a>
                      {{ note.reason }}
                    </div>
                  </section>
                  <footer>
                    <a href="#noteModal" data-day="{{ day.toJSON().split('T')[0] }}" data-crew="{{crew.id}}" data-toggle="modal" ng-click="openNoteModal(day, crew.id)">add a note</a>
                  </footer>
                </td>
            </tr>
            <tr ng-repeat="slot in slots">    
                <td ng-repeat="crew in crews | orderObjectBy:'order'">
                  <div ng-repeat="contract in contracts | crewFilter: crew.id | dayFilter:day.toJSON().split('T')[0] | slotFilter: slot" class="scheduled_slot">
                    <a class="contract" ng-click="contractModal()" >
                    <b>{{ contract.customer_info.full_name }} <br /> #{{ contract.location_abbr }}-{{ contract.invoice_number }}</b><br />
                    <span style="font-wight: normal !important;">{{ contract.size_and_type }} <br />in {{ contract.customer_info.city }} , {{ contract.customer_info.province }}
                      <br>
                      {{ contract.off_level_fill_type }} - {{ contract.arrival_range }}
                    </span>
                    <div class="contract-notes" ng-class="{has: contract.additional_notes.length>=1}">
                      {{ contract.additional_notes }} 
                    </div>
                    </a>
                  </div>

                  <a href="#" class="btn btn-default btn-mini empty-slot" ng-hide="contract.slot">Empty #{{slot}}</a>

                </td>
            </tr>
          </tbody>
        </table>

      </div><!-- End .widget-content -->
    </div><!-- End .widget -->
  </div><!-- End .span12  -->  
</div><!-- End .row-fluid  -->

<div id="noteModal" class="modal hide fade" style="display: none; " aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"><i class="icon16 i-close-2"></i></button>
    <h4>Create a New Note</h4>
  </div>
  <div class="modal-body">
      <div class="paddingT15 paddingB15">    
        <h4>Type in your Note</h4>
        <textarea type="text" ng-model="newNote" placeholder="Enter your note here" style="width:522px; height:100px;"></textarea>
        <p>
          {{ newNote }}
        </p>
      </div>

  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary" ng-click="addNote()" data-dismiss="modal">Save changes</a>
  </div>
</div>
